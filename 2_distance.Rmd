---
title: "1.2 Определение языка. Расстояния. Регулярки"
date: "25 июля 2017, АНДАН"
author: "Г. Мороз"
---

<style>
.parallax {
    /* The image used */
    background-image: url("2_distance.jpg");

    /* Set a specific height */
    min-height: 360px; 

    /* Create the parallax scrolling effect */
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: length;
}
</style>

> "Что общего между вороном и письменным столом?" <div style="float: right; clear: right; margin: 13px;">(Л. Кэрролл)</div>

<div class="parallax"></div>

### 1. Определение языка[^1]
[^1]: Данная картинка -- рисунок Бориса Аркадьевича Диодорова  из книжки Яна Экхольма "Тутта Карлссон, первая и единственная, Людвиг Четырнадцатый и другие"

Для определения языка существует два пакета `cld2` (вероятностный) и `cld3` (нейросеть).

```{r}
udhr_24 <- read.csv("https://goo.gl/cHviY5", stringsAsFactors = FALSE, sep = "\t")
udhr_24
cld2::detect_language(udhr_24$article_text)
cld2::detect_language(udhr_24$article_text, lang_code = FALSE)
cld3::detect_language(udhr_24$article_text)
cld2::detect_language("Ты женат? Говорите ли по-английски?")
cld3::detect_language("Ты женат? Говорите ли по-английски?")
cld2::detect_language("Варкалось. Хливкие шорьки пырялись по наве, и хрюкотали зелюки, как мюмзики в мове.")
cld3::detect_language("Варкалось. Хливкие шорьки пырялись по наве, и хрюкотали зелюки, как мюмзики в мове.")
cld2::detect_language("Варчилось… Хлив'язкі тхурки викрули, свербчись навкрузі, жасумновілі худоки гривіли зехряки в чузі.")
cld3::detect_language("Варчилось… Хлив'язкі тхурки викрули, свербчись навкрузі, жасумновілі худоки гривіли зехряки в чузі.")
cld2::detect_language_mixed("Многие в нашей команде OpenDataScience занимаются state-of-the-art технологиями машинного обучения: DL-фреймворками, байесовскими методами машинного обучения, вероятностным программированием и не только.")
cld3::detect_language_mixed("Многие в нашей команде OpenDataScience занимаются state-of-the-art технологиями машинного обучения: DL-фреймворками, байесовскими методами машинного обучения, вероятностным программированием и не только.")
```


<div class="parallax"></div>

### 2. Расстояния между строками
Существует много разных метрик для измерения расстояния между строками (см. <code>?&grave;stringdist-metrics&grave;</code>), в примерах используется расстояние Дамерау — Левенштейна. Данное расстояние получается при подсчете количества операций, которые нужно сделать, чтобы перевести одну строку в другую.

* вставка ab → aNb
* удаление aOb → ab
* замена символа aOb → aNb
* перестановка символов ab → ba

```{r}
stringdist::stringdist("корова","корова")
stringdist::stringdist("коровы", c("курица", "бык", "утка", "корова", "осел"))
stringdist::stringdistmatrix(c("быки", "коровы"), c("курица", "бык", "утка", "корова", "осел"))
stringdist::stringsim("коровы", c("курица", "бык", "утка", "корова", "осел"))
stringdist::amatch(c("быки", "коровы"), c("курица", "бык", "утка", "корова", "осел"), maxDist = 2)
stringdist::ain(c("осы", "коровы"), c("курица", "бык", "утка", "корова", "осел"), maxDist = 2)
```



<div class="parallax"></div>

### 3. Регулярные выражения

<div class="parallax"></div>

### 4. Задачи
#### 4.1 Функция для проверки полиндромности
Улучшите функцию `is.palindrome`, чтобы она могла учесть знаки препинания, пробелы и т. п.
```{r, echo=FALSE, message = FALSE}
is.palindrome <- function(x){
  x <- tolower(x)
  x <- gsub(" ", "", x)
  x <- gsub("[[:punct:]]", "", x)
  x == paste0(rev(substring(x, 1:nchar(x), 1:nchar(x))), collapse = "")
}
```
```{r}
is.palindrome("Замучен он, но не чумаз")
is.palindrome("Замучена она, но не чумаза")
```

<div class="parallax"></div>